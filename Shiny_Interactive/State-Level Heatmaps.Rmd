---
title: "State-Level Heatmaps of POC Proportion and Total Cases"
output: 
  html_document:
    runtime: shiny
---

```{r}
library(shiny)
library(tidyverse)
library(viridis)
library(plotly)
library(sf)

# Load the dataset from GitHub
data <- read_csv("https://raw.githubusercontent.com/sussmanbu/ma-4615-fa24-final-project-group-thirteen/c24f15418fe74137699115940f0014391b5e2aa4/dataset/merged_dataset_with_race.csv")

# Read the shapefile
us_states <- st_read("Shiny_Interactive/s_05mr24/s_05mr24.shp")

# Ensure the 'NAME' field matches the state names in your data
us_states$NAME <- tolower(us_states$NAME)
data$state <- tolower(data$state)

# Merge the shapefile with your dataset
state_data <- left_join(us_states, data, by = c("NAME" = "state"))

# Remove rows with any NA values
state_data <- state_data %>% drop_na()


```